#generalconcepts 

# [Varun Kouda: Linkedin - Notes on interrupts](https://www.linkedin.com/posts/varun-kouda-522a23165_hand-written-notes-on-interrupts-activity-7064281048485957632-6-oB?utm_source=share&utm_medium=member_desktop)

An interrupt is an event or exception, generated by either hardware or software, for which the CPU must stop its current activity and perform a service or run code related to the event.

## Asynchronous: Hardware Interrupts
Typically raised by a hardware device (whether internal or external) connected to the MCU.
These events are generated at arbitrary (or random) times with respect to CPU clock signals. 

Examples of internal hardware scenarios:
+ A communication protocol module received a new byte of data
+ Timer module completed the required time
+ ADC module finished ADC conversion

Procedure:
+ Device issues interrupt request to CPU
+ CPU suspends current task
+ CPU executes ISR (Interrupt Service Routine) to service the device
+ CPU resumes previous task

## Synchronous: Exceptions
These are produced by the CPU control unit while executing instructions, upon detecting an error or exception in a given instruction.
The CPU only issues these after execution of an instruction has been terminated.

When an exception occurs, the processor writes a specific value to a certain register in memory. This value is used to determine the exception classification/grouping. This value is the address of the instruction that caused the exception to occur.

Divided into 3 groups:
### 1. Faults
+ Saved value in register is the address of the instruction that caused the fault.
+ Generally correctable, able to restore program with no loss of continuity
+ When the exception handler can correct the condition that caused the exception, the instruction that caused the fault can be resumed
+ Common examples: Divide error, Invalid opcode, floating point error.

### 2. Traps
+ Saved value in register is address of the instruction which **should be executed after the trap**
+ Main use is in debugging
+ The interrupt signal is used to notify the debugger that a specific instruction has been executed
+ The debugger provides data to be examined by the user/developer
+ The user may ask that execution of the program resumes from the next instruction
+ Examples include a breakpoint or overflow

### 3. Aborts
+ Serious error occurred such as hardware failure
+ Control unit may be unable to store the location of the broken instruction to the register
+ The interrupt signal is sent by the control unit, this is an emergency signal used to switch control to the necessary exception handler.
+ Examples include double faults or machine-check exceptions

## Software interrupt
It's possible to trigger exceptions/interrupts using software.

## Interrupt Service Routine (ISR/ESR)
A software routine that is invoked by the CPU in response to a interrupt or exception. When an interrupt/exception occurs, the CPU will jump to execute the ISR. 

It's necessary for an ISR to run quickly to prevent slowdown of the device. An ISRs address is determined when compiling the application and is stored in a fixed location in flash memory (ROM).

+ ISR address is called a vector
+ All vectors are grouped in a vector table
+ The vector table location is known and can either be fixed or mapped.
+ ISR functions have no passed arguments and can never return a value.

## Interrupt handling

1. 

